<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FPS Aim Trainer</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            background: #0a0a0a;
            cursor: crosshair;
        }

        #app {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        .game-area {
            width: 100%;
            height: 100%;
            position: relative;
            background: linear-gradient(45deg, #1a1a2e 0%, #16213e 100%);
        }

        .target {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            user-select: none;
        }

        .target:hover {
            transform: scale(1.1);
        }

        .target-flick {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #ff4757, #c92a2a);
            border: 3px solid #ff6b6b;
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.6);
        }

        .target-micro {
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #ffa502, #ff7f00);
            border: 2px solid #ffbe76;
            box-shadow: 0 0 15px rgba(255, 165, 2, 0.6);
        }

        .target-strafe {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, #5f27cd, #341f97);
            border: 3px solid #8854d0;
            box-shadow: 0 0 20px rgba(95, 39, 205, 0.6);
        }

        .hud {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 10px;
            color: white;
            font-size: 14px;
            min-width: 250px;
            border: 2px solid #00d2d3;
            box-shadow: 0 0 20px rgba(0, 210, 211, 0.3);
            backdrop-filter: blur(5px);
            pointer-events: none;
        }

        .hud h2 {
            margin-bottom: 15px;
            color: #00d2d3;
            font-size: 18px;
            text-align: center;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-label {
            color: #aaa;
        }

        .stat-value {
            color: #00d2d3;
            font-weight: bold;
        }

        .crosshair {
            position: absolute;
            width: 20px;
            height: 20px;
            pointer-events: none;
            z-index: 1000;
        }

        .crosshair::before,
        .crosshair::after {
            content: '';
            position: absolute;
            background: rgba(0, 255, 0, 0.8);
        }

        .crosshair::before {
            width: 2px;
            height: 20px;
            left: 9px;
            top: 0;
        }

        .crosshair::after {
            width: 20px;
            height: 2px;
            top: 9px;
            left: 0;
        }

        .hit-marker {
            position: absolute;
            color: #00ff00;
            font-size: 24px;
            font-weight: bold;
            pointer-events: none;
            animation: hitFade 0.5s forwards;
        }

        @keyframes hitFade {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(1.5);
            }
        }

        .instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.4);
            padding: 15px 30px;
            border-radius: 10px;
            color: #aaa;
            font-size: 12px;
            border: 2px solid #555;
            backdrop-filter: blur(5px);
            pointer-events: none;
        }

        .mode-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.4);
            padding: 10px 20px;
            border-radius: 10px;
            color: white;
            border: 2px solid #00d2d3;
            backdrop-filter: blur(5px);
            pointer-events: none;
        }

        .credits {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.4);
            padding: 10px 20px;
            border-radius: 10px;
            color: #00d2d3;
            font-size: 14px;
            border: 2px solid #00d2d3;
            backdrop-filter: blur(5px);
            pointer-events: none;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 210, 211, 0.5);
        }

        .credits span {
            font-size: 18px;
            color: #ff6b6b;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="game-area" @click="handleMiss" @mousemove="updateCrosshair">
            <!-- Objetivos Flick -->
            <div v-for="(target, index) in flickTargets" 
                 :key="'flick-' + index"
                 v-show="target.visible"
                 class="target target-flick"
                 :style="{left: target.x + 'px', top: target.y + 'px'}"
                 @click.stop="hitTarget('flick', index)">
                F
            </div>

            <!-- Objetivos Micro -->
            <div v-for="(target, index) in microTargets" 
                 :key="'micro-' + index"
                 class="target target-micro"
                 :style="{left: target.x + 'px', top: target.y + 'px'}"
                 @click.stop="hitTarget('micro', index)">
            </div>

            <!-- Objetivo Strafe -->
            <div class="target target-strafe"
                 :style="{left: strafeTarget.x + 'px', top: strafeTarget.y + 'px'}"
                 @click.stop="hitTarget('strafe', 0)">
                S
            </div>

            <!-- Hit markers -->
            <div v-for="(marker, index) in hitMarkers" 
                 :key="'marker-' + index"
                 class="hit-marker"
                 :style="{left: marker.x + 'px', top: marker.y + 'px'}">
                +{{ marker.points }}
            </div>

            <!-- Crosshair -->
            <div class="crosshair" :style="{left: crosshair.x + 'px', top: crosshair.y + 'px'}"></div>
        </div>

        <!-- HUD -->
        <div class="hud">
            <h2>üìä ESTAD√çSTICAS</h2>
            <div class="stat-row">
                <span class="stat-label">Precisi√≥n:</span>
                <span class="stat-value">{{ accuracy }}%</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Aciertos:</span>
                <span class="stat-value">{{ stats.hits }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Fallos:</span>
                <span class="stat-value">{{ stats.misses }}</span>
            </div>
          
            <div class="stat-row">
                <span class="stat-label">Puntuaci√≥n:</span>
                <span class="stat-value">{{ stats.score }}</span>
            </div>
        </div>

        <!-- Mode Indicator -->
        <div class="mode-indicator">
            <div>üéØ MODO: ENTRENAMIENTO COMPLETO</div>
            <div style="font-size: 12px; margin-top: 5px; color: #aaa;">
                {{ screenWidth }}x{{ screenHeight }}
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            üî¥ Flick (F) - Aparecen/Desaparecen | üü† Micro - Objetivos peque√±os | üü£ Strafe (S) - Se mueve en X/Y | Clic para generar nuevos
        </div>

        <!-- Credits -->
        <div class="credits">
            BY Ma<span>—ï</span>t
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    screenWidth: window.innerWidth,
                    screenHeight: window.innerHeight,
                    flickTargets: [],
                    microTargets: [],
                    strafeTarget: { x: 0, y: 0, vx: 2, vy: 2 },
                    crosshair: { x: 0, y: 0 },
                    hitMarkers: [],
                    stats: {
                        hits: 0,
                        misses: 0,
                        score: 0,
                        reactionTimes: []
                    },
                    lastSpawnTime: Date.now(),
                    animationFrame: null
                }
            },
            computed: {
                accuracy() {
                    const total = this.stats.hits + this.stats.misses;
                    return total > 0 ? Math.round((this.stats.hits / total) * 100) : 0;
                },
                avgReactionTime() {
                    if (this.stats.reactionTimes.length === 0) return 0;
                    const sum = this.stats.reactionTimes.reduce((a, b) => a + b, 0);
                    return Math.round(sum / this.stats.reactionTimes.length);
                }
            },
            mounted() {
                this.initTargets();
                this.startAnimation();
                window.addEventListener('resize', this.handleResize);
            },
            beforeUnmount() {
                if (this.animationFrame) {
                    cancelAnimationFrame(this.animationFrame);
                }
                window.removeEventListener('resize', this.handleResize);
            },
            methods: {
                handleResize() {
                    this.screenWidth = window.innerWidth;
                    this.screenHeight = window.innerHeight;
                    this.initTargets();
                },
                initTargets() {
                    // Inicializar 3 objetivos Flick
                    this.flickTargets = [];
                    for (let i = 0; i < 3; i++) {
                        this.flickTargets.push(this.createRandomTarget(60, true));
                    }

                    // Inicializar 3 objetivos Micro
                    this.microTargets = [];
                    for (let i = 0; i < 3; i++) {
                        this.microTargets.push(this.createRandomTarget(30, false));
                    }

                    // Inicializar objetivo Strafe
                    this.strafeTarget = {
                        x: this.screenWidth / 2,
                        y: this.screenHeight / 2,
                        vx: (Math.random() - 0.5) * 4,
                        vy: (Math.random() - 0.5) * 4
                    };
                },
                createRandomTarget(size, isFlick) {
                    const margin = size + 20;
                    return {
                        x: Math.random() * (this.screenWidth - margin * 2) + margin,
                        y: Math.random() * (this.screenHeight - margin * 2) + margin,
                        visible: isFlick ? true : true,
                        spawnTime: Date.now()
                    };
                },
                updateCrosshair(e) {
                    this.crosshair.x = e.clientX - 10;
                    this.crosshair.y = e.clientY - 10;
                },
                hitTarget(type, index) {
                    const now = Date.now();
                    let points = 0;
                    let target;

                    if (type === 'flick') {
                        target = this.flickTargets[index];
                        points = 100;
                        this.flickTargets[index] = this.createRandomTarget(60, true);
                        this.startFlickTimer(index);
                    } else if (type === 'micro') {
                        target = this.microTargets[index];
                        points = 150;
                        this.microTargets[index] = this.createRandomTarget(30, false);
                    } else if (type === 'strafe') {
                        target = this.strafeTarget;
                        points = 200;
                        this.strafeTarget = {
                            x: Math.random() * (this.screenWidth - 100) + 50,
                            y: Math.random() * (this.screenHeight - 100) + 50,
                            vx: (Math.random() - 0.5) * 4,
                            vy: (Math.random() - 0.5) * 4
                        };
                    }

                    this.stats.hits++;
                    this.stats.score += points;
                    
                    const reactionTime = now - target.spawnTime;
                    this.stats.reactionTimes.push(reactionTime);
                    if (this.stats.reactionTimes.length > 10) {
                        this.stats.reactionTimes.shift();
                    }

                    this.showHitMarker(target.x, target.y, points);
                },
                startFlickTimer(index) {
                    setTimeout(() => {
                        if (this.flickTargets[index]) {
                            this.flickTargets[index].visible = false;
                            setTimeout(() => {
                                if (this.flickTargets[index]) {
                                    this.flickTargets[index] = this.createRandomTarget(60, true);
                                }
                            }, 500);
                        }
                    }, 1000 + Math.random() * 1000);
                },
                handleMiss() {
                    this.stats.misses++;
                },
                showHitMarker(x, y, points) {
                    const marker = { x, y, points };
                    this.hitMarkers.push(marker);
                    setTimeout(() => {
                        const idx = this.hitMarkers.indexOf(marker);
                        if (idx > -1) {
                            this.hitMarkers.splice(idx, 1);
                        }
                    }, 500);
                },
                startAnimation() {
                    const animate = () => {
                        // Mover objetivo Strafe
                        this.strafeTarget.x += this.strafeTarget.vx;
                        this.strafeTarget.y += this.strafeTarget.vy;

                        // Rebote en los bordes
                        if (this.strafeTarget.x <= 0 || this.strafeTarget.x >= this.screenWidth - 50) {
                            this.strafeTarget.vx *= -1;
                        }
                        if (this.strafeTarget.y <= 0 || this.strafeTarget.y >= this.screenHeight - 50) {
                            this.strafeTarget.vy *= -1;
                        }

                        this.animationFrame = requestAnimationFrame(animate);
                    };
                    animate();

                    // Iniciar timers para flick targets
                    this.flickTargets.forEach((_, index) => {
                        this.startFlickTimer(index);
                    });
                }
            }
        }).mount('#app');
    </script>
</body>
</html>